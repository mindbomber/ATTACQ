<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Which AI Trust Tier Are You?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <style>
    @keyframes glitch-flicker {
      0% { opacity: 1; filter: blur(0px) drop-shadow(0 0 8px #0ff); }
      20% { opacity: 0.7; filter: blur(1.5px) drop-shadow(0 0 16px #f0f); }
      40% { opacity: 1; filter: blur(0.5px) drop-shadow(0 0 12px #0ff); }
      60% { opacity: 0.8; filter: blur(2px) drop-shadow(0 0 20px #f0f); }
      80% { opacity: 1; filter: blur(0px) drop-shadow(0 0 8px #0ff); }
      100% { opacity: 0.6; filter: blur(1.2px) drop-shadow(0 0 24px #f0f); }
    }
    </style>
</head>
<body>
    <main>
        <!-- Tier Tally Badge and Table -->
        <div id="tier-tally-badge-wrapper" style="margin:2em 0 1em 0; text-align:center; display:none;">
            <div id="tier-tally-table" style="margin-bottom:1em; display:none;"></div>
            <div id="badge-earned" style="display:none;"></div>
        </div>

        <!-- Start Screen -->
        <div id="start-screen" class="screen">
            <h1>What Level of AI Power Should You Be Trusted With?</h1>
            <h2>Take this short test to find out how much chaos you could unleash.</h2>
            <p>
                Welcome to the only quiz that determines if you're a digital saint, a creative tinkerer, or a future headline in the AI Incident Report. <br><br>
                <strong>AI safety</strong> isn't just for the robotsâ€”it's for the humans who think they can outsmart them. Answer honestly (or don't, but the AI will know). <br><br>
                <em>Remember: With great power comes great responsibility... and sometimes, great disaster. Let's see if you're ready for the keys to the AI kingdomâ€”or if you should stick to Minesweeper.</em>
            </p>
            <button id="start-btn" type="button">Start Quiz</button>
            <button id="exit-btn-start" class="exit-btn" type="button" style="margin-top:2em;">Exit</button>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" style="display:none;" role="region" aria-labelledby="quiz-title" aria-live="polite"></div>
        
        <!-- Game Container -->
        <div id="game-container" style="display:none;" role="region" aria-label="Microgame area" aria-live="polite"></div>        <!-- Results Screen (Modern Modular) -->
        <div class="results screen" id="results" style="display:none;" role="region" aria-labelledby="results-title" aria-live="polite">
            <!-- Content will be populated by screens/results-screen.js -->
        </div></main>

    <!-- Modern script loading with error handling -->
    <script src="debug-utils.js"></script>
    
    <!-- Screen system support (ES6 modules) -->
    <script type="module">        // Load screen system if supported
        try {
            const module = await import('./screens/screen-loader.js?v=' + Date.now());
            window.screenLoader = module.screenLoader;
            console.log('âœ… Screen system loaded');
        } catch (error) {
            console.log('ðŸ”„ Screen system not available:', error.message);
        }
    </script>
    
    <script>
        // App configuration
        const APP_VERSION = '4.2.1';
        const CACHE_BUSTER = window.location.hostname === 'localhost' ? Date.now() : APP_VERSION;
        
        // Performance monitoring
        if (window.DebugUtils) {
            DebugUtils.performance.start('app-initialization');
            DebugUtils.logger.system.load('Application starting with optimized loading');
        }
        
        if (window.LoadingPerformanceMonitor) {
            LoadingPerformanceMonitor.startLoading();
        }
        
        // Enhanced script loader using optimization
        async function loadScript(src) {
            if (window.OptimizedScriptLoader) {
                return window.OptimizedScriptLoader.loadScript(`${src}?v=${CACHE_BUSTER}`);
            }
            
            // Fallback to basic loader
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = `${src}?v=${CACHE_BUSTER}`;
                script.onload = () => {
                    if (window.DebugUtils) {
                        DebugUtils.logger.system.load(`Script loaded: ${src}`);
                    }
                    resolve();
                };
                script.onerror = () => {
                    const error = new Error(`Failed to load script: ${src}`);
                    if (window.DebugUtils) {
                        DebugUtils.handleError(error, 'Script Loading', 'Some features may not work properly');
                    }
                    reject(error);
                };
                document.head.appendChild(script);
            });
        }
          // Enhanced app initialization using optimized loading
        async function initializeApp() {
            try {
                // Use progressive loading if available
                if (window.ProgressiveLoader) {
                    console.log('ðŸš€ Using progressive script loading');
                    
                    await window.ProgressiveLoader.loadProgressively((stage, current, total) => {
                        if (window.DebugUtils) {
                            DebugUtils.logger.system.load(`Loading stage: ${stage} (${current}/${total})`);
                        }
                        
                        // Show loading progress if desired
                        const progress = (current / total) * 100;
                        console.log(`ðŸ“Š Loading progress: ${progress.toFixed(1)}%`);
                    });
                    
                } else {
                    // Fallback to sequential loading                    console.log('ðŸ“œ Using fallback sequential loading');
                      const scripts = [
                        'ajax_optimization.js',
                        'questions.js',
                        'results.js', 
                        'OFFICIAL_BADGE_SYSTEM.js',
                        'microgames/unified-microgame-system.js',
                        'quiz-logic.js'
                    ];
                    
                    for (const script of scripts) {
                        await loadScript(script);
                    }
                }
                
                if (window.LoadingPerformanceMonitor) {
                    LoadingPerformanceMonitor.endLoading();
                    const report = LoadingPerformanceMonitor.getReport();
                    console.log('ðŸ“Š Loading performance report:', report);
                }
                
                if (window.DebugUtils) {
                    const duration = DebugUtils.performance.end('app-initialization');
                    DebugUtils.logger.system.load(`Application initialized in ${duration}ms`);
                }
                
            } catch (error) {
                if (window.DebugUtils) {
                    DebugUtils.handleError(error, 'App Initialization', 'The application failed to load properly. Please refresh the page.');
                } else {
                    console.error('App initialization failed:', error);
                    alert('Failed to load the application. Please refresh the page.');
                }
            }
        }
        
        // Start app initialization
        initializeApp();
    </script>    <!-- Glitch overlay for visual effects -->
    <div id="glitch-interrupt" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:99999;background:rgba(10,10,20,0.92);color:#fff;align-items:center;justify-content:center;text-align:center;font-size:2em;font-family:'Share Tech Mono',monospace;letter-spacing:0.04em;overflow:hidden;">
      <div id="glitch-message" style="padding:2em 1em;filter:drop-shadow(0 0 8px #0ff);animation:glitch-flicker 1.2s infinite alternate;">
        <!-- Message will be injected here -->
      </div>
    </div>
</body>
</html>
